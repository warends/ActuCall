'use strict';

$(document).ready(function () {
    var _this = this;

    // var path = document.querySelector('.banner-line');
    // var length = path.getTotalLength();
    // console.log(length);

    var $menuBtn = $('#menu-btn'),
        $cap = $('.cap'),
        $menu = $('.menu');

    $menuBtn.on('click', function (e) {
        e.preventDefault();
        $menu.toggleClass('active');
    });

    if (window.innerWidth >= 768) {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 10) {
                $menuBtn.addClass("active");
                $menu.addClass('hide');
            } else {
                $menuBtn.removeClass("active");
                $menu.removeClass('hide');
                if ($menu.hasClass('active')) {
                    $menu.removeClass('active');
                }
            }
        });
    }

    var $caps = $('.cap');
    var $lines = $('.line');
    var $capDesc = $('.cap-desc');
    window.sr = ScrollReveal();

    function clearCap() {
        $caps.removeClass('active');
        $lines.removeClass('active');
        $capDesc.removeClass('active');
    }

    var page = $('main').attr('id');
    if (page === 'home') {

        bannerReveal();

        if (window.innerWidth >= 768) {
            $('#real-time-call-intelligence-tools').addClass('active');
            $('.real-time-call-intelligence-tools-line').addClass('active');
            $('.real-time-call-intelligence-tools').addClass('active');
        }

        $cap.hover(function () {
            clearCap();
            var slug = $(this).attr('id');
            var line = $('.' + slug + '-line');
            line.addClass('active');
            setTimeout(function () {
                $('.' + slug).addClass('active');
            }, 400);
        }, function () {
            $capDesc.removeClass('active');
            $lines.removeClass('active');
            var slug = $(this).attr('id');
            $('.' + slug).removeClass('active');
        });

        $cap.on('click', function (e) {
            $cap.removeClass('active');
            var slug = $(_this).attr('id');
            $('.' + slug).addClass('active');
        });

        var bgVid = document.getElementById('bgvid'),
            width = window.innerWidth + 'px';

        bgVid.onloadedmetadata = function () {
            bgVid.play();
        };

        if (window.innerWidth >= 768) {
            bgVid.style.width = width;
        } else {
            bgVid.style.width = '800px';
        }
    } else if (page === 'page-about') {
        bindAboutScroll();
    } else if (page === 'capability') {

        setActiveFeature();
        var $btns = $('.feature-btn');
        var $features = $('.feature-content');
        $btns.on('click', function (e) {
            $btns.removeClass('active');
            $features.removeClass('active');
            setTimeout(function () {
                $(e.target).addClass('active');
                var target = $(e.target).data('target');
                $('#' + target).addClass('active');
            }, 350);
        });
    } else if (page === 'actucall') {
        actucallReveal();
    } else if (page === 'verticals') {
        verticalReveal();
    }

    function verticalReveal() {
        sr.reveal('.vertical', { distance: '50px', duration: 300 }, 200);
    }

    function bindAboutScroll() {
        $(window).on('scroll', function () {
            if ($('.denver').isInViewport()) {
                $('.denver').addClass('active');
            } else {
                $('.denver').removeClass('active');
            }
        });
    }

    function bannerReveal() {
        sr.reveal('.box-container', {
            distance: '100px',
            duration: 500,
            delay: 1000,
            afterReveal: function afterReveal(el) {
                $(el).find('.banner-line').addClass('active');
            }
        }, 2000);
    }

    function actucallReveal() {
        sr.reveal('.feature.one', { distance: '100px', duration: 500 }, 200);
        sr.reveal('.feature.two', { distance: '100px', duration: 500 }, 200);
    }

    function setActiveFeature() {
        var btn = $('.feature-col').first().find('.feature-btn');
        btn.addClass('active');
        var target = btn.data('target');
        $('#' + target).addClass('active');
        var pathArray = window.location.pathname.split('/');
        $('.cap-more.' + pathArray[2]).addClass('active');
        console.log(pathArray[2]);
    }

    $.fn.isInViewport = function () {
        var elementTop = $(this).offset().top,
            elementBottom = elementTop + $(this).outerHeight(),
            viewportTop = $(window).scrollTop() - 300,
            viewportBottom = viewportTop + $(window).height();
        return elementBottom > viewportTop && elementTop < viewportBottom;
    };
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdHVjYWxsLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiJG1lbnVCdG4iLCIkY2FwIiwiJG1lbnUiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZUNsYXNzIiwid2luZG93IiwiaW5uZXJXaWR0aCIsInNjcm9sbCIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJoYXNDbGFzcyIsIiRjYXBzIiwiJGxpbmVzIiwiJGNhcERlc2MiLCJzciIsIlNjcm9sbFJldmVhbCIsImNsZWFyQ2FwIiwicGFnZSIsImF0dHIiLCJiYW5uZXJSZXZlYWwiLCJob3ZlciIsInNsdWciLCJsaW5lIiwic2V0VGltZW91dCIsImJnVmlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aWR0aCIsIm9ubG9hZGVkbWV0YWRhdGEiLCJwbGF5Iiwic3R5bGUiLCJiaW5kQWJvdXRTY3JvbGwiLCJzZXRBY3RpdmVGZWF0dXJlIiwiJGJ0bnMiLCIkZmVhdHVyZXMiLCJ0YXJnZXQiLCJkYXRhIiwiYWN0dWNhbGxSZXZlYWwiLCJ2ZXJ0aWNhbFJldmVhbCIsInJldmVhbCIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJpc0luVmlld3BvcnQiLCJkZWxheSIsImFmdGVyUmV2ZWFsIiwiZWwiLCJmaW5kIiwiYnRuIiwiZmlyc3QiLCJwYXRoQXJyYXkiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic3BsaXQiLCJjb25zb2xlIiwibG9nIiwiZm4iLCJlbGVtZW50VG9wIiwib2Zmc2V0IiwidG9wIiwiZWxlbWVudEJvdHRvbSIsIm91dGVySGVpZ2h0Iiwidmlld3BvcnRUb3AiLCJ2aWV3cG9ydEJvdHRvbSIsImhlaWdodCJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsRUFBRUMsUUFBRixFQUFZQyxLQUFaLENBQWtCLFlBQVU7QUFBQTs7QUFDeEI7QUFDQTtBQUNBOztBQUVBLFFBQUlDLFdBQVdILEVBQUUsV0FBRixDQUFmO0FBQUEsUUFDSUksT0FBT0osRUFBRSxN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UUFBaEIsQ0FBeUJDLEtBQXpCLENBQStCLEdBQS9CLENBQWhCO0FBQ0F6RCxVQUFFLGVBQWVzRCxVQUFVLENBQVYsQ0FBakIsRUFBK0J4QyxRQUEvQixDQUF3QyxRQUF4QztBQUNBNEMsZ0JBQVFDLEdBQVIsQ0FBWUwsVUFBVSxDQUFWLENBQVo7QUFDRDs7QUFFRHRELE1BQUU0RCxFQUFGLENBQUtiLFlBQUwsR0FBb0IsWUFBVztBQUM3QixZQUFJYyxhQUFhN0QsRUFBRSxJQUFGLEVBQVE4RCxNQUFSLEdBQWlCQyxHQUFsQztBQUFBLFlBQ0lDLGdCQUFnQkgsYUFBYTdELEVBQUUsSUFBRixFQUFRaUUsV0FBUixFQURqQztBQUFBLFlBRUlDLGNBQWNsRSxFQUFFVSxNQUFGLEVBQVVHLFNBQVYsS0FBd0IsR0FGMUM7QUFBQSxZQUdJc0QsaUJBQWlCRCxjQUFjbEUsRUFBRVUsTUFBRixFQUFVMEQsTUFBVixFQUhuQztBQUlBLGVBQU9KLGdCQUFnQkUsV0FBaEIsSUFBK0JMLGFBQWFNLGNBQW5EO0FBQ0QsS0FORDtBQVFILENBN0pEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgLy8gdmFyIHBhdGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFubmVyLWxpbmUnKTtcbiAgICAvLyB2YXIgbGVuZ3RoID0gcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xuICAgIC8vIGNvbnNvbGUubG9nKGxlbmd0aCk7XG5cbiAgICBsZXQgJG1lbnVCdG4gPSAkKCcjbWVudS1idG4nKSxcbiAgICAgICAgJGNhcCA9ICQoJy5jYXAnKSxcbiAgICAgICAgJG1lbnUgPSAkKCcubWVudScpO1xuXG4gICAgJG1lbnVCdG4ub24oJ2NsaWNrJywoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRtZW51LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCl7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDEwKXtcbiAgICAgICAgICAgICAgICAkbWVudUJ0bi5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAkbWVudS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkbWVudUJ0bi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAkbWVudS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgIGlmKCRtZW51Lmhhc0NsYXNzKCdhY3RpdmUnKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWVudS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCAkY2FwcyA9ICQoJy5jYXAnKTtcbiAgICBjb25zdCAkbGluZXMgPSAkKCcubGluZScpO1xuICAgIGNvbnN0ICRjYXBEZXNjID0gJCgnLmNhcC1kZXNjJyk7XG4gICAgd2luZG93LnNyID0gU2Nyb2xsUmV2ZWFsKCk7XG5cbiAgICBmdW5jdGlvbiBjbGVhckNhcCgpe1xuICAgICAgICAkY2Fwcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICRsaW5lcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICRjYXBEZXNjLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICBsZXQgcGFnZSA9ICQoJ21haW4nKS5hdHRyKCdpZCcpO1xuICAgIGlmKHBhZ2UgPT09ICdob21lJyl7XG5cbiAgICAgICAgYmFubmVyUmV2ZWFsKCk7XG5cbiAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPj0gNzY4KXtcbiAgICAgICAgICAgICQoJyNyZWFsLXRpbWUtY2FsbC1pbnRlbGxpZ2VuY2UtdG9vbHMnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcucmVhbC10aW1lLWNhbGwtaW50ZWxsaWdlbmNlLXRvb2xzLWxpbmUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcucmVhbC10aW1lLWNhbGwtaW50ZWxsaWdlbmNlLXRvb2xzJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgJGNhcC5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjbGVhckNhcCgpO1xuICAgICAgICAgICAgICAgIHZhciBzbHVnID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gJCgnLicrIHNsdWcgKyAnLWxpbmUnKTtcbiAgICAgICAgICAgICAgICBsaW5lLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy4nICsgc2x1ZykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkY2FwRGVzYy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJGxpbmVzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB2YXIgc2x1ZyA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAkKCcuJyArIHNsdWcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAkY2FwLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAkY2FwLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHZhciBzbHVnID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgJCgnLicgKyBzbHVnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBiZ1ZpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZ3ZpZCcpLFxuICAgICAgICAgICAgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCArICdweCc7XG5cbiAgICAgICAgYmdWaWQub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYmdWaWQucGxheSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCl7XG4gICAgICAgICAgICBiZ1ZpZC5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmdWaWQuc3R5bGUud2lkdGggPSAnODAwcHgnO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYocGFnZSA9PT0gJ3BhZ2UtYWJvdXQnKXtcbiAgICAgICAgYmluZEFib3V0U2Nyb2xsKCk7XG4gICAgfSBlbHNlIGlmKHBhZ2UgPT09ICdjYXBhYmlsaXR5Jyl7XG5cbiAgICAgICAgc2V0QWN0aXZlRmVhdHVyZSgpO1xuICAgICAgICBjb25zdCAkYnRucyA9ICQoJy5mZWF0dXJlLWJ0bicpO1xuICAgICAgICBjb25zdCAkZmVhdHVyZXMgPSAkKCcuZmVhdHVyZS1jb250ZW50Jyk7XG4gICAgICAgICRidG5zLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAkYnRucy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkZmVhdHVyZXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgJCgnIycgKyB0YXJnZXQpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0sIDM1MCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSBlbHNlIGlmKHBhZ2UgPT09ICdhY3R1Y2FsbCcpe1xuICAgICAgICBhY3R1Y2FsbFJldmVhbCgpO1xuICAgIH0gZWxzZSBpZihwYWdlID09PSAndmVydGljYWxzJyl7XG4gICAgICAgIHZlcnRpY2FsUmV2ZWFsKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmVydGljYWxSZXZlYWwoKXtcbiAgICAgICAgc3IucmV2ZWFsKCcudmVydGljYWwnLCB7IGRpc3RhbmNlOiAnNTBweCcsZHVyYXRpb246IDMwMCB9LCAyMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJpbmRBYm91dFNjcm9sbCgpe1xuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmKCQoJy5kZW52ZXInKS5pc0luVmlld3BvcnQoKSkge1xuICAgICAgICAgICAgICAgICQoJy5kZW52ZXInKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5kZW52ZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJhbm5lclJldmVhbCgpe1xuICAgICAgICBzci5yZXZlYWwoJy5ib3gtY29udGFpbmVyJywge1xuICAgICAgICAgICAgZGlzdGFuY2U6ICcxMDBweCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgZGVsYXk6IDEwMDAsXG4gICAgICAgICAgICBhZnRlclJldmVhbDogZnVuY3Rpb24oZWwpe1xuICAgICAgICAgICAgICAgICQoZWwpLmZpbmQoJy5iYW5uZXItbGluZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWN0dWNhbGxSZXZlYWwoKSB7XG4gICAgICAgIHNyLnJldmVhbCgnLmZlYXR1cmUub25lJywgeyBkaXN0YW5jZTogJzEwMHB4JyxkdXJhdGlvbjogNTAwIH0sIDIwMCk7XG4gICAgICAgIHNyLnJldmVhbCgnLmZlYXR1cmUudHdvJywgeyBkaXN0YW5jZTogJzEwMHB4JyxkdXJhdGlvbjogNTAwIH0sIDIwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QWN0aXZlRmVhdHVyZSgpe1xuICAgICAgbGV0IGJ0biA9ICQoJy5mZWF0dXJlLWNvbCcpLmZpcnN0KCkuZmluZCgnLmZlYXR1cmUtYnRuJyk7XG4gICAgICBidG4uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgbGV0IHRhcmdldCA9IGJ0bi5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICQoJyMnICsgdGFyZ2V0KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICBsZXQgcGF0aEFycmF5ID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJyk7XG4gICAgICAkKCcuY2FwLW1vcmUuJyArIHBhdGhBcnJheVsyXSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgY29uc29sZS5sb2cocGF0aEFycmF5WzJdKTtcbiAgICB9XG5cbiAgICAkLmZuLmlzSW5WaWV3cG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IGVsZW1lbnRUb3AgPSAkKHRoaXMpLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICBlbGVtZW50Qm90dG9tID0gZWxlbWVudFRvcCArICQodGhpcykub3V0ZXJIZWlnaHQoKSxcbiAgICAgICAgICB2aWV3cG9ydFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKSAtIDMwMCxcbiAgICAgICAgICB2aWV3cG9ydEJvdHRvbSA9IHZpZXdwb3J0VG9wICsgJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgcmV0dXJuIGVsZW1lbnRCb3R0b20gPiB2aWV3cG9ydFRvcCAmJiBlbGVtZW50VG9wIDwgdmlld3BvcnRCb3R0b207XG4gICAgfTtcblxufSk7XG4iXX0=
