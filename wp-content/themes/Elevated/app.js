'use strict';

$(document).ready(function () {
    var _this = this;

    // var path = document.querySelector('.contact-line');
    // var length = path.getTotalLength();
    // console.log(length);

    var $menuBtn = $('#menu-btn'),
        $cap = $('.cap'),
        $menu = $('.menu');

    $menuBtn.on('click', function (e) {
        e.preventDefault();
        $menu.toggleClass('active');
    });

    if (window.innerWidth >= 768) {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 10) {
                $menuBtn.addClass("active");
                $menu.addClass('hide');
            } else {
                $menuBtn.removeClass("active");
                $menu.removeClass('hide');
            }
        });
    }

    var $caps = $('.cap');
    var $lines = $('.line');
    var $capDesc = $('.cap-desc');
    window.sr = ScrollReveal();

    function clearCap() {
        $caps.removeClass('active');
        $lines.removeClass('active');
        $capDesc.removeClass('active');
    }
    var page = $('main').attr('id');

    if (page === 'home') {

        $('.slider').slick({
            dots: true,
            autoplay: true,
            autoplaySpeed: 4000,
            slidesToScroll: 1,
            prevArrow: '<i class="fa fa-arrow-left white arrow-prev" aria-hidden="true"></i>',
            nextArrow: '<i class="fa fa-arrow-right white arrow-next" aria-hidden="true"></i>'
        });

        if (window.innerWidth >= 768) {
            $('#real-time-call-intelligence-tools').addClass('active');
            $('.real-time-call-intelligence-tools-line').addClass('active');
            $('.real-time-call-intelligence-tools').addClass('active');
        }

        $cap.hover(function () {
            clearCap();
            var slug = $(this).attr('id');
            var line = $('.' + slug + '-line');
            line.addClass('active');
            setTimeout(function () {
                $('.' + slug).addClass('active');
            }, 400);
        }, function () {
            $capDesc.removeClass('active');
            $lines.removeClass('active');
            var slug = $(this).attr('id');
            $('.' + slug).removeClass('active');
        });

        $cap.on('click', function (e) {
            $cap.removeClass('active');
            var slug = $(_this).attr('id');
            $('.' + slug).addClass('active');
        });

        var bgVid = document.getElementById('bgvid'),
            width = window.innerWidth + 'px';
        bgVid.play();
        if (window.innerWidth >= 768) {
            bgVid.style.width = width;
        } else {
            bgVid.style.width = '620px';
        }
    } else if (page === 'page-about') {

        $(window).on('scroll', function () {
            if ($('.denver').isInViewport()) {
                $('.denver').addClass('active');
            } else {
                $('.denver').removeClass('active');
            }
        });
    } else if (page === 'capability') {

        setActiveFeature();
        var $btns = $('.feature-btn');
        var $features = $('.feature-content');
        $btns.on('click', function (e) {
            $btns.removeClass('active');
            $features.removeClass('active');
            setTimeout(function () {
                $(e.target).addClass('active');
                var target = $(e.target).data('target');
                $('#' + target).addClass('active');
            }, 350);
        });
    } else if (page === 'actucall') {

        actucallReveal();
    } else if (page === 'verticals') {

        sr.reveal('.vertical', { distance: '50px', duration: 300 }, 200);
    }

    function actucallReveal() {
        sr.reveal('.feature.one', { distance: '100px', duration: 500 }, 200);
        sr.reveal('.feature.two', { distance: '100px', duration: 500 }, 200);
    }

    function setActiveFeature() {
        var btn = $('.feature-col').first().find('.feature-btn');
        btn.addClass('active');
        var target = btn.data('target');
        $('#' + target).addClass('active');
        var pathArray = window.location.pathname.split('/');
        $('.cap-more.' + pathArray[2]).addClass('active');
        console.log(pathArray[2]);
    }

    $.fn.isInViewport = function () {
        var elementTop = $(this).offset().top,
            elementBottom = elementTop + $(this).outerHeight(),
            viewportTop = $(window).scrollTop(),
            viewportBottom = viewportTop + $(window).height();
        return elementBottom > viewportTop && elementTop < viewportBottom;
    };
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdHVjYWxsLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiJG1lbnVCdG4iLCIkY2FwIiwiJG1lbnUiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZUNsYXNzIiwid2luZG93IiwiaW5uZXJXaWR0aCIsInNjcm9sbCIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCIkY2FwcyIsIiRsaW5lcyIsIiRjYXBEZXNjIiwic3IiLCJTY3JvbGxSZXZlYWwiLCJjbGVhckNhcCIsInBhZ2UiLCJhdHRyIiwic2xpY2siLCJkb3RzIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwic2xpZGVzVG9TY3JvbGwiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJob3ZlciIsInNsdWciLCJsaW5lIiwic2V0VGltZW91dCIsImJnVmlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aWR0aCIsInBsYXkiLCJzdHlsZSIsImlzSW5WaWV3cG9ydCIsInNldEFjdGl2ZUZlYXR1cmUiLCIkYnRucyIsIiRmZWF0dXJlcyIsInRhcmdldCIsImRhdGEiLCJhY3R1Y2FsbFJldmVhbCIsInJldmVhbCIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJidG4iLCJmaXJzdCIsImZpbmQiLCJwYXRoQXJyYXkiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic3BsaXQiLCJjb25zb2xlIiwibG9nIiwiZm4iLCJlbGVtZW50VG9wIiwib2Zmc2V0IiwidG9wIiwiZWxlbWVudEJvdHRvbSIsIm91dGVySGVpZ2h0Iiwidmlld3BvcnRUb3AiLCJ2aWV3cG9ydEJvdHRvbSIsImhlaWdodCJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsRUFBRUMsUUFBRixFQUFZQyxLQUFaLENBQWtCLFlBQVU7QUFBQTs7QUFDeEI7QUFDQTtBQUNBOztBQUVBLFFBQUlDLFdBQVdILEVBQUUsV0FBRixDQUFmO0FBQUEsUUFDSUksT0FBT0osRUFBRSxNQUFGLENBRFg7QUFBQSxRQUVJSyxRQUFR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RUFBRVUsTUFBRixFQUFVRyxTQUFWLEVBRmxCO0FBQUEsWUFHSXFELGlCQUFpQkQsY0FBY2pFLEVBQUVVLE1BQUYsRUFBVXlELE1BQVYsRUFIbkM7QUFJQSxlQUFPSixnQkFBZ0JFLFdBQWhCLElBQStCTCxhQUFhTSxjQUFuRDtBQUNELEtBTkQ7QUFRSCxDQWhKRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgIC8vIHZhciBwYXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3QtbGluZScpO1xuICAgIC8vIHZhciBsZW5ndGggPSBwYXRoLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgLy8gY29uc29sZS5sb2cobGVuZ3RoKTtcblxuICAgIGxldCAkbWVudUJ0biA9ICQoJyNtZW51LWJ0bicpLFxuICAgICAgICAkY2FwID0gJCgnLmNhcCcpLFxuICAgICAgICAkbWVudSA9ICQoJy5tZW51Jyk7XG5cbiAgICAkbWVudUJ0bi5vbignY2xpY2snLChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJG1lbnUudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaWYod2luZG93LmlubmVyV2lkdGggPj0gNzY4KXtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gMTApe1xuICAgICAgICAgICAgICAgICRtZW51QnRuLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICRtZW51LmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRtZW51QnRuLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICRtZW51LnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0ICRjYXBzID0gJCgnLmNhcCcpO1xuICAgIGNvbnN0ICRsaW5lcyA9ICQoJy5saW5lJyk7XG4gICAgY29uc3QgJGNhcERlc2MgPSAkKCcuY2FwLWRlc2MnKTtcbiAgICB3aW5kb3cuc3IgPSBTY3JvbGxSZXZlYWwoKTtcblxuICAgIGZ1bmN0aW9uIGNsZWFyQ2FwKCl7XG4gICAgICAgICRjYXBzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJGxpbmVzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJGNhcERlc2MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICBsZXQgcGFnZSA9ICQoJ21haW4nKS5hdHRyKCdpZCcpO1xuXG4gICAgaWYocGFnZSA9PT0gJ2hvbWUnKXtcblxuICAgICAgICAkKCcuc2xpZGVyJykuc2xpY2soe1xuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9wbGF5OnRydWUsXG4gICAgICAgICAgICBhdXRvcGxheVNwZWVkOjQwMDAsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDoxLFxuICAgICAgICAgICAgcHJldkFycm93OiAnPGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1sZWZ0IHdoaXRlIGFycm93LXByZXZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcbiAgICAgICAgICAgIG5leHRBcnJvdzogJzxpIGNsYXNzPVwiZmEgZmEtYXJyb3ctcmlnaHQgd2hpdGUgYXJyb3ctbmV4dFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCl7XG4gICAgICAgICAgICAkKCcjcmVhbC10aW1lLWNhbGwtaW50ZWxsaWdlbmNlLXRvb2xzJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnJlYWwtdGltZS1jYWxsLWludGVsbGlnZW5jZS10b29scy1saW5lJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnJlYWwtdGltZS1jYWxsLWludGVsbGlnZW5jZS10b29scycpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRjYXAuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJDYXAoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2x1ZyA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9ICQoJy4nKyBzbHVnICsgJy1saW5lJyk7XG4gICAgICAgICAgICAgICAgbGluZS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkKCcuJyArIHNsdWcpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9LCA0MDApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJGNhcERlc2MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICRsaW5lcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdmFyIHNsdWcgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgJCgnLicgKyBzbHVnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgJGNhcC5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgJGNhcC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB2YXIgc2x1ZyA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICQoJy4nICsgc2x1ZykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgYmdWaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmd2aWQnKSxcbiAgICAgICAgICAgIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggKyAncHgnO1xuICAgICAgICBiZ1ZpZC5wbGF5KCk7XG4gICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCl7XG4gICAgICAgICAgICBiZ1ZpZC5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmdWaWQuc3R5bGUud2lkdGggPSAnNjIwcHgnO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYocGFnZSA9PT0gJ3BhZ2UtYWJvdXQnKXtcblxuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmKCQoJy5kZW52ZXInKS5pc0luVmlld3BvcnQoKSkge1xuICAgICAgICAgICAgICAgICQoJy5kZW52ZXInKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5kZW52ZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSBlbHNlIGlmKHBhZ2UgPT09ICdjYXBhYmlsaXR5Jyl7XG5cbiAgICAgICAgc2V0QWN0aXZlRmVhdHVyZSgpO1xuICAgICAgICBjb25zdCAkYnRucyA9ICQoJy5mZWF0dXJlLWJ0bicpO1xuICAgICAgICBjb25zdCAkZmVhdHVyZXMgPSAkKCcuZmVhdHVyZS1jb250ZW50Jyk7XG4gICAgICAgICRidG5zLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAkYnRucy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkZmVhdHVyZXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgJCgnIycgKyB0YXJnZXQpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0sIDM1MCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSBlbHNlIGlmKHBhZ2UgPT09ICdhY3R1Y2FsbCcpe1xuXG4gICAgICAgIGFjdHVjYWxsUmV2ZWFsKCk7XG5cbiAgICB9IGVsc2UgaWYocGFnZSA9PT0gJ3ZlcnRpY2Fscycpe1xuXG4gICAgICAgIHNyLnJldmVhbCgnLnZlcnRpY2FsJywgeyBkaXN0YW5jZTogJzUwcHgnLGR1cmF0aW9uOiAzMDAgfSwgMjAwKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFjdHVjYWxsUmV2ZWFsKCkge1xuICAgICAgICBzci5yZXZlYWwoJy5mZWF0dXJlLm9uZScsIHsgZGlzdGFuY2U6ICcxMDBweCcsZHVyYXRpb246IDUwMCB9LCAyMDApO1xuICAgICAgICBzci5yZXZlYWwoJy5mZWF0dXJlLnR3bycsIHsgZGlzdGFuY2U6ICcxMDBweCcsZHVyYXRpb246IDUwMCB9LCAyMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEFjdGl2ZUZlYXR1cmUoKXtcbiAgICAgIGxldCBidG4gPSAkKCcuZmVhdHVyZS1jb2wnKS5maXJzdCgpLmZpbmQoJy5mZWF0dXJlLWJ0bicpO1xuICAgICAgYnRuLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIGxldCB0YXJnZXQgPSBidG4uZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAkKCcjJyArIHRhcmdldCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgbGV0IHBhdGhBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpO1xuICAgICAgJCgnLmNhcC1tb3JlLicgKyBwYXRoQXJyYXlbMl0pLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIGNvbnNvbGUubG9nKHBhdGhBcnJheVsyXSk7XG4gICAgfVxuXG4gICAgJC5mbi5pc0luVmlld3BvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBlbGVtZW50VG9wID0gJCh0aGlzKS5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgZWxlbWVudEJvdHRvbSA9IGVsZW1lbnRUb3AgKyAkKHRoaXMpLm91dGVySGVpZ2h0KCksXG4gICAgICAgICAgdmlld3BvcnRUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgdmlld3BvcnRCb3R0b20gPSB2aWV3cG9ydFRvcCArICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgIHJldHVybiBlbGVtZW50Qm90dG9tID4gdmlld3BvcnRUb3AgJiYgZWxlbWVudFRvcCA8IHZpZXdwb3J0Qm90dG9tO1xuICAgIH07XG5cbn0pO1xuIl19
